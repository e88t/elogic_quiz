var s,r,e,t,d;s=ko,r=$(".grid"),e=$(".form-select"),t=$("#priority"),d=new function(){this.blocks=[],this.addBlock=function(){var i=e.val();this.blocks.push({id:this.blocks.length,size:i,priority:t.val()?t.val():0,width:i.charAt(0),height:i.charAt(2),square:Number(i.charAt(0))*Number(i.charAt(2))})},this.removeBlock=function(i){var s=this.getIndexById(i,this.blocks);void 0!==s&&this.blocks.splice(s,1)},this.getIndexById=function(i,s){for(var e,r=0,t=s.length;r<t;r++)if(s[r].id===i){e=r;break}return e},this.createGrid=function(){var s="";[].concat(this.blocks).sort(function(i,s){return s.square-i.square||s.width-i.width}).sort(function(i,s){return s.priority-i.priority}).forEach(function(i){switch(i.size){case"1х1":s+="<div class='grid-item'><div class='one'><div class='grid-item-descr'>size "+i.size+"<br> pr."+i.priority+"</div></div></div>";break;case"1х2":s+="<div class='grid-item'><div class='one-two'><div class='grid-item-descr'>size "+i.size+"<br> pr."+i.priority+"</div></div></div>";break;case"1х3":s+="<div class='grid-item'><div class='one-three'><div class='grid-item-descr'>size "+i.size+"<br> pr."+i.priority+"</div></div></div>";break;case"2х1":s+="<div class='grid-item'><div class='two-one'><div class='grid-item-descr'>size "+i.size+"<br> pr."+i.priority+"</div></div></div>";break;case"2х2":s+="<div class='grid-item'><div class='two'><div class='grid-item-descr'>size "+i.size+"<br> pr."+i.priority+"</div></div></div>";break;case"2х3":s+="<div class='grid-item'><div class='two-three'><div class='grid-item-descr'>size "+i.size+"<br> pr."+i.priority+"</div></div></div>";break;case"3х1":s+="<div class='grid-item'><div class='three-one'><div class='grid-item-descr'>size "+i.size+"<br> pr."+i.priority+"</div></div></div>";break;case"3х2":s+="<div class='grid-item'><div class='three-two'><div class='grid-item-descr'>size "+i.size+"<br> pr."+i.priority+"</div></div></div>";break;case"3х3":s+="<div class='grid-item'><div class='three'><div class='grid-item-descr'>size "+i.size+"<br> pr."+i.priority+"</div></div></div>";break;case"4х1":s+="<div class='grid-item'><div class='four-one'><div class='grid-item-descr'>size "+i.size+"<br> pr."+i.priority+"</div></div></div>";break;default:console.log("createGridButton, unknown size of element")}}),r.html(s),new Muuri(".grid",{layout:{fillGaps:!0,alignBottom:!0}}).refreshItems().layout(),s=""},this.resetGrid=function(){this.blocks=[]}},s.applyBindings(new function(i){this.blockList=d,this.newBlockSize=s.observable(""),this.newBlockPriority=s.observable(""),this.blocks=s.observable(!1),this.renderedGrid=s.observable(!1),this.isDisabled=s.observable(!1);var e=this;t.on("input",function(){2<this.value.length?this.value=this.value.slice(0,2):this.value<10?this.value=this.value.slice(0,1):this.value<0&&(this.value=0)}),t.on("focus",function(i){0==$(this).val()&&$(this).val("")}),t.on("blur",function(i){0==$(this).val()&&$(this).val("0")}),this.addBlock=function(){this.blockList.addBlock(this.newBlockSize(),this.newBlockPriority),this.newBlockSize(""),this.newBlockPriority(""),this.blocks(this.blockList.blocks)},this.createGrid=function(){this.blockList.createGrid(),this.renderedGrid(!0),this.isDisabled(!0)},this.removeBlock=function(i,s){e.blockList.removeBlock(i.id),e.blocks(e.blockList.blocks)},this.resetGrid=function(){this.blockList.resetGrid(),e.blocks(!1),this.renderedGrid(!1),this.isDisabled(!1),r.empty(),new Muuri(".grid").destroy()}});